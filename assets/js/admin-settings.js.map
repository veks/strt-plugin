{"version":3,"file":"admin-settings.js","sources":["../../src/js/admin/settings/index.js"],"sourcesContent":["jQuery(function ($) {\r\n  if (typeof wp === 'undefined' || typeof wp.media === 'undefined') {\r\n    return\r\n  }\r\n\r\n  // Для файла\r\n  $('.file-select').each(function () {\r\n    var $this = $(this),\r\n      file_select_button = $this.find('.file-select-button'),\r\n      file_delete_button = $this.find('.file-delete-button'),\r\n      file_select_input = $this.find('.file-select-input'),\r\n      wp_media_file_select = null\r\n\r\n    file_select_button.on('click', function (event) {\r\n      event.preventDefault()\r\n      if (wp_media_file_select) {\r\n        wp_media_file_select.open()\r\n        return\r\n      }\r\n      wp_media_file_select = wp.media({\r\n        title   : 'Выбор файла',\r\n        button  : { text: 'Выбрать файл' },\r\n        multiple: false,\r\n      })\r\n      wp_media_file_select.on('select', function () {\r\n        var attachment = wp_media_file_select.state().get('selection').first().toJSON()\r\n        file_delete_button.removeClass('hidden')\r\n        file_select_button.html('Изменить').attr('title', 'Изменить')\r\n        if (typeof strt_admin_settings !== 'undefined' && ['url', 'id'].includes(strt_admin_settings.attachment)) {\r\n          file_select_input.val(attachment[strt_admin_settings.attachment])\r\n        } else {\r\n          file_select_input.val(attachment.url)\r\n        }\r\n      })\r\n      wp_media_file_select.open()\r\n    })\r\n\r\n    file_delete_button.on('click', function (event) {\r\n      event.preventDefault()\r\n      $(this).addClass('hidden')\r\n      file_select_button.text('Добавить').attr('title', 'Добавить')\r\n      file_select_input.val('')\r\n    })\r\n  })\r\n\r\n  // Для изображения\r\n  $('.image-select').each(function () {\r\n    var $this = $(this),\r\n      image_select_button = $this.find('.image-select-button'),\r\n      image_delete_button = $this.find('.image-delete-button'),\r\n      image_select_input = $this.find('.image-select-input'),\r\n      image_container = $this.find('.image-container'),\r\n      wp_media_image_select = null\r\n\r\n    image_select_button.on('click', function (event) {\r\n      event.preventDefault()\r\n      if (wp_media_image_select) {\r\n        wp_media_image_select.open()\r\n        return\r\n      }\r\n      wp_media_image_select = wp.media({\r\n        title   : 'Выбор изображения',\r\n        button  : { text: 'Выбрать изображение' },\r\n        library : { type: 'image' },\r\n        multiple: false,\r\n      })\r\n      wp_media_image_select.on('select', function () {\r\n        var attachment = wp_media_image_select.state().get('selection').first().toJSON()\r\n        var thumbUrl = attachment.url\r\n        if (attachment.sizes && attachment.sizes.thumbnail) {\r\n          thumbUrl = attachment.sizes.thumbnail.url\r\n        }\r\n        image_container.html(\r\n          '<img src=\"' + thumbUrl + '\" alt=\"\" style=\"max-width:100%;\"/>')\r\n        image_delete_button.removeClass('hidden')\r\n        image_select_button.html('Изменить').attr('title', 'Изменить')\r\n        image_select_input.val(attachment.id)\r\n      })\r\n      wp_media_image_select.open()\r\n    })\r\n\r\n    image_delete_button.on('click', function (event) {\r\n      event.preventDefault()\r\n      image_container.html('')\r\n      $(this).addClass('hidden')\r\n      image_select_button.text('Добавить').attr('title', 'Добавить')\r\n      image_select_input.val('')\r\n    })\r\n  })\r\n})\r\n"],"names":["jQuery","$","wp","media","each","$this","file_select_button","find","file_delete_button","file_select_input","wp_media_file_select","on","event","preventDefault","open","title","button","text","multiple","attachment","state","get","first","toJSON","removeClass","html","attr","strt_admin_settings","includes","val","url","addClass","image_select_button","image_delete_button","image_select_input","image_container","wp_media_image_select","library","type","thumbUrl","sizes","thumbnail","id"],"mappings":"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"}